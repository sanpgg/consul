<div class="container">
    <div class="row mt-4 pb-3 justify-content-center">
        <div class="col-md-10">
            <div class="breadcrumbs">
                <ul>
                    <li>
                        <a href="/">Inicio</a>
                    </li>
                    <li>
                        <a href="/account">Perfil</a>
                    </li>
                    <li>
                        <span>Subir identificación </span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="row pb-5 justify-content-center">
        <div class="col-md-6 order-2 order-md-1 col-lg-5">
            <div class="content-upload">
                <% if current_user.age >= 18 %>
                    <span class="step">1º</span>
                    <h1 class="mt-3">Sube tu INE ó Licencia</h1>
                    <p>Para poder proponer o votar por proyectos deberás subir tu identificación oficial INE o licencia de conducir:</p>
                    <p class="text-green">¿Qué es la <a href="#">identificación oficial INE</a> y <a href="#">licencia de conducir</a>?</p>
                    <img class="w-100" src="../images/img-ine.png" alt="INE"/>

                    <p class="text-gray mt-4">Adjunta una foto o imagen con las siguientes características:</p>
                    
                    <ul>
                        <li>El domicilio debe ser de San Pedro Garza García</li>
                        <li>La INE o licencia no puede estar vencida</li>
                        <li>Sube una foto del documento original</li> 
                        <li>Asegúrate de que se pueda leer todo el texto</li>
                        <li>Apaga el flash de la cámara para evitar reflejos</li>
                    </ul>

                    <%= form_for @residence, as: "residence", url: residence_path do |f| %>
                        <div class="row">
                            <div class="col-md-12">
                                <% if @residence.errors.messages[:base].present? %>
                                    <div id="error-mensaje">
                                        <%= @residence.errors.messages[:base].first %>   
                                    </div>
                                <% end %>
                                <% if @residence.user&.errors&.messages&.include?(:curp) %>
                                    <div id="error-mensaje">
                                        No pudimos verificar tu identidad porque el registro de ciudadano ya existe. <br>
                                        Si consideras que es un error escribe un email a: decide@sanpedro.gob.mx
                                    </div>
                                <% end %>
                                <!--<div class="progress"></div>-->
                            </div>
                        </div>

                        <% if current_user.ife_file_name.blank? %>
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="margin-bottom">
                                        <p>1. Una fotografía de la <u>parte frontal</u> de tu INE</p>
                                        <div class="file-input custom-file">
                                            <%= f.file_field :ife, accept: 'image/png,image/jpeg', label: false, class: 'file-input custom-file-input', id: 'ineGroupFile', required: true %>
                                            <!--<label id='file-label' class="custom-file-label button success expanded data-js-label" for="ineGroupFile" aria-describedby="ineGroupFile">Elige el archivo</label>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% end %>

                        <div class="small-12 margin-top">
                            <%= f.label :terms_of_service do %>
                                <%= f.check_box :terms_of_service, title: t('verification.residence.new.accept_terms_text_title'), label: false, checked: true %>
                                <span class="checkbox inline">
                                    <%= t("verification.residence.new.accept_terms_text",
                                        terms_url: link_to(t("verification.residence.new.terms_and_privacy"), "https://transparencia.sanpedro.gob.mx/documentosAvisosPrivacidad/%205309/_2024520_95_AP-Presupuesto%20Participativo%20Decide%20San%20Pedro.pdf",
                                        title: t('shared.target_blank_html'),
                                        target: "_blank")).html_safe
                                    %>
                                </span>
                            <% end %>
                            <p class="text-gray">Tus datos estarán protegidos conforme a la Ley General de Protección de Datos Personales en Posesión de los Sujetos Obligados.</p>
                        </div>

                        <div class="clear submit-container">
                            <%= f.submit "Subir foto o imagen", id: "new_residence_submit", class: "mt-4 btn-black py-2 px-4 d-inline-block" %>
                        </div>

                    <% end %>
                <% else %>

                <%= form_for @residence, as: "residence", url: residence_path do |f| %>
                    <span class="step">1º</span>
                    <h1 class="mt-3 pb-3">Sube tu acta de nacimiento o CURP</h1>
                    <p>Para poder votar por proyectos deberás subir tu acta de nacimiento ó CURP:</p>
                    <p class="text-green">¿Qué es el <a target="_blank" href="https://www.gob.mx/ActaNacimiento/">acta de nacimiento</a> y <a target="_blank" href="https://www.gob.mx/curp/">CURP</a>?</p>

                    <img class="mb-3" src="../images/img-acta.png" alt="Acta"/>
                    <p class="text-gray">Adjunta una foto o imagen con las siguientes recomendaciones:</p>
                    <ul>
                        <li>Sube una foto del documento original</li>
                        <li>Asegúrate de que se pueda leer todo el texto</li>
                        <li>Apaga el flash de la cámara para evitar reflejos</li>
                    </ul>
                    <input type="file" name="residence[birth_certificate]" required />

                    <span class="mt-3 step">2º</span>
                    <h1 class="mt-4">Sube INE o licencia de conducir de tu tutor(ra)</h1>
                    <p class="text-gray mt-4">Adjunta una foto o imagen con las siguientes características:</p>
                    <img class="w-100 mb-3" src="../images/img-ine.png" alt="INE"/>
                    <p class="text-gray">Toma o adjunta una foto o imagen del INE de tu tutor(ra) con las siguientes características:</p>
                    <ul>
                        <li>El domicilio debe ser de San Pedro Garza García</li>
                        <li>La INE o licencia no puede estar vencida</li>
                        <li>Sube una foto del documento original</li>
                    </ul>
                    <div class="row">
                        <div class="col-md-12">
                            <% if @residence.errors.messages[:base].present? %>
                                <div id="error-mensaje">
                                    <%= @residence.errors.messages[:base].first %>
                                </div>
                            <% end %>
                            <% if @residence.user&.errors&.messages&.include?(:curp) %>
                                <div id="error-mensaje">
                                    No pudimos verificar tu identidad porque el registro de ciudadano ya existe. <br>
                                    Si consideras que es un error escribe un email a: decide@sanpedro.gob.mx
                                </div>
                            <% end %>
                            <!--<div class="progress"></div>-->
                        </div>
                    </div>

                    <% if current_user.ife_file_name.blank? %>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="margin-bottom">
                                    <p class="mt-3">1. Una fotografía de la <u>parte frontal</u> de tu INE</p>
                                    <div class="file-input custom-file">
                                        <%= f.file_field :ife, accept: 'image/png,image/jpeg', label: false, class: 'file-input custom-file-input', id: 'ineGroupFile', required: true %>
                                        <!--<label id='file-label' class="btn-black py-2 px-4 d-inline-block" for="ineGroupFile" aria-describedby="ineGroupFile">Elige el archivo</label>-->
                                    </div>
                                </div>
                                <% end %>

                                <div class="small-12 margin-top">
                                    <%= f.label :terms_of_service do %>
                                        <%= f.check_box :terms_of_service, title: t('verification.residence.new.accept_terms_text_title'), label: false, checked: true %>
                                        <span class="checkbox inline">
                                            <%= t("verification.residence.new.accept_terms_text",
                                            terms_url: link_to(t("verification.residence.new.terms_and_privacy"),"https://transparencia.sanpedro.gob.mx/documentosAvisosPrivacidad/%205309/_2024520_95_AP-Presupuesto%20Participativo%20Decide%20San%20Pedro.pdf",
                                            title: t('shared.target_blank_html'),
                                            target: "_blank")).html_safe
                                            %>
                                        </span>
                                    <% end %>
                                    <p class="text-gray">Tus datos estarán protegidos conforme a la Ley General de Protección de Datos Personales en Posesión de los Sujetos Obligados.</p>
                                </div>

                                <div class="clear submit-container">
                                <%= f.submit "Subir foto o imagen",
                                     id: "new_residence_submit",
                                     class: "mt-4 btn-black py-2 px-4 d-inline-block" %>
                                </div>
                            </div>
                        </div>
                    <% end %>
                <% end %>
            </div>
        </div>
        <div class="col-md-6 order-1 order-md-2 col-lg-5">
            <div class="row justify-content-center mb-4">
                <div class="col-md-8">
                    <div class="content-card brd-radius-14 px-4 py-4">
                        <h6>¿Por qué es necesario identificarte?</h6>
                        <p>
                        Tu identificación oficial INE o licencia de conducir comprueba que eres un ciudadano de San Pedro Garza García y esto te da el derecho de poder votar o proponer por un proyecto participativo.</p>
                    </div>
                </div>
            </div>
        </div>
      </div>
</div>